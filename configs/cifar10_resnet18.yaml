# configs/cifar10_resnet18.yaml (最终方案 - 动态算法 + 最优注入)

# --- (dataset, train, ddp 部分保持不变) ---

device: 'cuda:1'

dataset:
  name: 'cifar10'
  data_path: './data'
  image_size: 32
  num_classes: 10
  mean: [0.4914, 0.4822, 0.4465]
  std: [0.2023, 0.1994, 0.2010]

train:
  epochs: 300
  batch_size: 256
  optimizer: 'sgd'
  learning_rate: 0.05
  momentum: 0.9
  weight_decay: 5.0e-4
  scheduler: 'step'

ddp:
  dist_url: 'tcp://127.0.0.1:23456'
  dist_backend: 'nccl'
  multiprocessing_distributed: True

# ---------------------------------
# S2A 攻击配置 (最终版)
# ---------------------------------
attack:
  poison_rate: 0.1
  target_label: 0

  wavelet: 'db4'

  # [!!! 推荐 !!!] 既然 HL/LH 逻辑已修复, 您可以尝试攻击它们了
  subband: ['hl', 'lh', 'hh']
  # subband: ['hh'] # (或者只保留hh)

  s2a:
    # --- [王牌] 结构完整性约束开关 ---
    use_structural_constraint: false
    debug: false
    # --- 触发器源 ---
    trigger_image_path: './stop_sign.png'

    energy_ratio_to_noise: 0.4

    blend_ratio_in_noise: 0.8 # 80%来自触发器模式, 20%保留原始噪声

    min_trigger_norm_hl: 0.078294
    min_trigger_norm_lh: 0.076678
    min_trigger_norm_hh: 0.005808
    # --- 底层SSA参数 ---
    window_size_1d: 8
    window_size_2d_h: 4
    window_size_2d_w: 4